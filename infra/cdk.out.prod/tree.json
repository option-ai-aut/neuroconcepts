{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.236.0"},"children":{"Immivo-Test":{"id":"Immivo-Test","path":"Immivo-Test","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.236.0"},"children":{"ImmivoVPC":{"id":"ImmivoVPC","path":"Immivo-Test/ImmivoVPC","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/ImmivoVPC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"Immivo-Test/ImmivoVPC"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"Immivo-Test/ImmivoVPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"Immivo-Test/ImmivoVPC/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-central-1a","cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"Immivo-Test/ImmivoVPC/PublicSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"Acl":{"id":"Acl","path":"Immivo-Test/ImmivoVPC/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"Immivo-Test/ImmivoVPC/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Test/ImmivoVPC/PublicSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"Immivo-Test/ImmivoVPC/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ImmivoVPCPublicSubnet1RouteTable7638AEB2"},"subnetId":{"Ref":"ImmivoVPCPublicSubnet1SubnetF66FB41A"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"Immivo-Test/ImmivoVPC/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"ImmivoVPCIGWCE166DAC"},"routeTableId":{"Ref":"ImmivoVPCPublicSubnet1RouteTable7638AEB2"}}}},"EIP":{"id":"EIP","path":"Immivo-Test/ImmivoVPC/PublicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"Immivo-Test/ImmivoVPC/PublicSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"NATGateway":{"id":"NATGateway","path":"Immivo-Test/ImmivoVPC/PublicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["ImmivoVPCPublicSubnet1EIP6728BF6E","AllocationId"]},"subnetId":{"Ref":"ImmivoVPCPublicSubnet1SubnetF66FB41A"},"tags":[{"key":"Name","value":"Immivo-Test/ImmivoVPC/PublicSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"Immivo-Test/ImmivoVPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"Immivo-Test/ImmivoVPC/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-central-1b","cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"Immivo-Test/ImmivoVPC/PublicSubnet2"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"Acl":{"id":"Acl","path":"Immivo-Test/ImmivoVPC/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"Immivo-Test/ImmivoVPC/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Test/ImmivoVPC/PublicSubnet2"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"Immivo-Test/ImmivoVPC/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ImmivoVPCPublicSubnet2RouteTable726D9D65"},"subnetId":{"Ref":"ImmivoVPCPublicSubnet2SubnetF03A036B"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"Immivo-Test/ImmivoVPC/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"ImmivoVPCIGWCE166DAC"},"routeTableId":{"Ref":"ImmivoVPCPublicSubnet2RouteTable726D9D65"}}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"Immivo-Test/ImmivoVPC/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"Immivo-Test/ImmivoVPC/PrivateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-central-1a","cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"Immivo-Test/ImmivoVPC/PrivateSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"Acl":{"id":"Acl","path":"Immivo-Test/ImmivoVPC/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"Immivo-Test/ImmivoVPC/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Test/ImmivoVPC/PrivateSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"Immivo-Test/ImmivoVPC/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ImmivoVPCPrivateSubnet1RouteTable1CC356B3"},"subnetId":{"Ref":"ImmivoVPCPrivateSubnet1Subnet5717415A"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"Immivo-Test/ImmivoVPC/PrivateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"ImmivoVPCPublicSubnet1NATGateway302E4A39"},"routeTableId":{"Ref":"ImmivoVPCPrivateSubnet1RouteTable1CC356B3"}}}}}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"Immivo-Test/ImmivoVPC/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"Immivo-Test/ImmivoVPC/PrivateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-central-1b","cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"Immivo-Test/ImmivoVPC/PrivateSubnet2"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"Acl":{"id":"Acl","path":"Immivo-Test/ImmivoVPC/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"Immivo-Test/ImmivoVPC/PrivateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Test/ImmivoVPC/PrivateSubnet2"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"Immivo-Test/ImmivoVPC/PrivateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ImmivoVPCPrivateSubnet2RouteTable537E4D6A"},"subnetId":{"Ref":"ImmivoVPCPrivateSubnet2Subnet7191D4D3"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"Immivo-Test/ImmivoVPC/PrivateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"ImmivoVPCPublicSubnet1NATGateway302E4A39"},"routeTableId":{"Ref":"ImmivoVPCPrivateSubnet2RouteTable537E4D6A"}}}}}},"IGW":{"id":"IGW","path":"Immivo-Test/ImmivoVPC/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Test/ImmivoVPC"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"VPCGW":{"id":"VPCGW","path":"Immivo-Test/ImmivoVPC/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"ImmivoVPCIGWCE166DAC"},"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"Immivo-Test/ImmivoVPC/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.236.0"},"children":{"Default":{"id":"Default","path":"Immivo-Test/ImmivoVPC/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"Immivo-Test/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.236.0"},"children":{"Staging":{"id":"Staging","path":"Immivo-Test/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"Role":{"id":"Role","path":"Immivo-Test/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}},"Handler":{"id":"Handler","path":"Immivo-Test/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"DBSecret":{"id":"DBSecret","path":"Immivo-Test/DBSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/DBSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{"secretStringTemplate":"{\"username\":\"postgres\"}","excludePunctuation":true,"includeSpace":false,"generateStringKey":"password"},"name":"Immivo-DB-Secret-test","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"Attachment":{"id":"Attachment","path":"Immivo-Test/DBSecret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/DBSecret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DBSecretD58955BC"},"targetId":{"Ref":"PostgresInstance19CDD68A"},"targetType":"AWS::RDS::DBInstance"}}}}}}},"DBSecurityGroup":{"id":"DBSecurityGroup","path":"Immivo-Test/DBSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/DBSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Allow access to DB","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"from ImmivoTestLambdaSecurityGroupA5404BB8:5432":{"id":"from ImmivoTestLambdaSecurityGroupA5404BB8:5432","path":"Immivo-Test/DBSecurityGroup/from ImmivoTestLambdaSecurityGroupA5404BB8:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Lambda (VPC) to reach DB","fromPort":5432,"groupId":{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]},"toPort":5432}}}}},"LambdaSecurityGroup":{"id":"LambdaSecurityGroup","path":"Immivo-Test/LambdaSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/LambdaSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Orchestrator Lambda - allows all outbound via NAT Gateway","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}}}},"PostgresInstance":{"id":"PostgresInstance","path":"Immivo-Test/PostgresInstance","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.236.0"},"children":{"SubnetGroup":{"id":"SubnetGroup","path":"Immivo-Test/PostgresInstance/SubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.236.0"},"children":{"Default":{"id":"Default","path":"Immivo-Test/PostgresInstance/SubnetGroup/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for PostgresInstance database","subnetIds":[{"Ref":"ImmivoVPCPrivateSubnet1Subnet5717415A"},{"Ref":"ImmivoVPCPrivateSubnet2Subnet7191D4D3"}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"Resource":{"id":"Resource","path":"Immivo-Test/PostgresInstance/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","copyTagsToSnapshot":true,"dbInstanceClass":"db.t4g.micro","dbSubnetGroupName":{"Ref":"PostgresInstanceSubnetGroup84F90C7C"},"deletionProtection":true,"engine":"postgres","engineVersion":"16","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:password::}}"]]},"maxAllocatedStorage":50,"publiclyAccessible":false,"storageEncrypted":true,"storageType":"gp2","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"vpcSecurityGroups":[{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]}]}}}}},"CognitoEmailKmsKey":{"id":"CognitoEmailKmsKey","path":"Immivo-Test/CognitoEmailKmsKey","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Key","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/CognitoEmailKmsKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnKey","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Key","aws:cdk:cloudformation:props":{"description":"Immivo Cognito Email Sender KMS Key (test)","enableKeyRotation":true,"keyPolicy":{"Statement":[{"Action":"kms:*","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::463090596988:root"},"Resource":"*"},{"Action":["kms:CreateGrant","kms:Encrypt"],"Effect":"Allow","Principal":{"Service":"cognito-idp.amazonaws.com"},"Resource":"*"}],"Version":"2012-10-17"},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"Alias":{"id":"Alias","path":"Immivo-Test/CognitoEmailKmsKey/Alias","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Alias","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/CognitoEmailKmsKey/Alias/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnAlias","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Alias","aws:cdk:cloudformation:props":{"aliasName":"alias/immivo-cognito-email-test","targetKeyId":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]}}}}}}}},"CustomEmailSenderLambda":{"id":"CustomEmailSenderLambda","path":"Immivo-Test/CustomEmailSenderLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Test/CustomEmailSenderLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/CustomEmailSenderLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Test/CustomEmailSenderLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/CustomEmailSenderLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"kms:Decrypt","Effect":"Allow","Resource":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":"arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-test-??????"}],"Version":"2012-10-17"},"policyName":"CustomEmailSenderLambdaServiceRoleDefaultPolicy77D6D2A2","roles":[{"Ref":"CustomEmailSenderLambdaServiceRoleA213E962"}]}}}}}}},"Code":{"id":"Code","path":"Immivo-Test/CustomEmailSenderLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Test/CustomEmailSenderLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Test/CustomEmailSenderLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Test/CustomEmailSenderLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"618e00fc5df27b7edab44d5517b91ad2da8cba71dd93bfc27b6b02c4002050ec.zip"},"environment":{"variables":{"KEY_ARN":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]},"APP_SECRET_ARN":"arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-test"}},"functionName":"Immivo-CustomEmailSender-test","handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["CustomEmailSenderLambdaServiceRoleA213E962","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"timeout":30}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Test/CustomEmailSenderLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/CustomEmailSenderLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CustomEmailSenderLambdaA1C15DAA"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}}}},"ImmivoUserPool":{"id":"ImmivoUserPool","path":"Immivo-Test/ImmivoUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.236.0"},"children":{"CustomEmailSenderCognito":{"id":"CustomEmailSenderCognito","path":"Immivo-Test/ImmivoUserPool/CustomEmailSenderCognito","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CustomEmailSenderLambdaA1C15DAA","Arn"]},"principal":"cognito-idp.amazonaws.com","sourceArn":{"Fn::GetAtt":["ImmivoUserPool48AD5837","Arn"]}}}},"Resource":{"id":"Resource","path":"Immivo-Test/ImmivoUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","lambdaConfig":{"kmsKeyId":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]},"customEmailSender":{"lambdaArn":{"Fn::GetAtt":["CustomEmailSenderLambdaA1C15DAA","Arn"]},"lambdaVersion":"V1_0"}},"policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true}},"schema":[{"name":"given_name","mutable":true,"required":true},{"name":"family_name","mutable":true,"required":true},{"name":"phone_number","mutable":true,"required":false},{"name":"address","mutable":true,"required":false},{"name":"company_name","attributeDataType":"String","mutable":true},{"name":"postal_code","attributeDataType":"String","mutable":true},{"name":"city","attributeDataType":"String","mutable":true},{"name":"country","attributeDataType":"String","mutable":true}],"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"Project":"Immivo","Stage":"test"},"usernameAttributes":["email"],"userPoolName":"Immivo-Users-test","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ImmivoClient":{"id":"ImmivoClient","path":"Immivo-Test/ImmivoUserPool/ImmivoClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/ImmivoUserPool/ImmivoClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"Immivo-Client-test","explicitAuthFlows":["ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"ImmivoUserPool48AD5837"}}}}}}}},"ImmivoAdminUserPool":{"id":"ImmivoAdminUserPool","path":"Immivo-Test/ImmivoAdminUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.236.0"},"children":{"CustomEmailSenderCognito":{"id":"CustomEmailSenderCognito","path":"Immivo-Test/ImmivoAdminUserPool/CustomEmailSenderCognito","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CustomEmailSenderLambdaA1C15DAA","Arn"]},"principal":"cognito-idp.amazonaws.com","sourceArn":{"Fn::GetAtt":["ImmivoAdminUserPool1121EFDE","Arn"]}}}},"Resource":{"id":"Resource","path":"Immivo-Test/ImmivoAdminUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","lambdaConfig":{"kmsKeyId":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]},"customEmailSender":{"lambdaArn":{"Fn::GetAtt":["CustomEmailSenderLambdaA1C15DAA","Arn"]},"lambdaVersion":"V1_0"}},"policies":{"passwordPolicy":{"minimumLength":12,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"given_name","mutable":true,"required":true},{"name":"family_name","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"Project":"Immivo","Stage":"test"},"usernameAttributes":["email"],"userPoolName":"Immivo-Admins-test","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ImmivoAdminClient":{"id":"ImmivoAdminClient","path":"Immivo-Test/ImmivoAdminUserPool/ImmivoAdminClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/ImmivoAdminUserPool/ImmivoAdminClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"Immivo-Admin-Client-test","explicitAuthFlows":["ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"ImmivoAdminUserPool1121EFDE"}}}}}}}},"AppSecret":{"id":"AppSecret","path":"Immivo-Test/AppSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"OrchestratorLambda":{"id":"OrchestratorLambda","path":"Immivo-Test/OrchestratorLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Test/OrchestratorLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Test/OrchestratorLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}]},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":["arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-test-??????",{"Ref":"DBSecretD58955BC"}]},{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:AdminUpdateUserAttributes","cognito-idp:ListUsers"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ImmivoAdminUserPool1121EFDE","Arn"]},{"Fn::GetAtt":["ImmivoUserPool48AD5837","Arn"]}]},{"Action":["ce:GetCostAndUsage","ce:GetCostForecast","ce:GetDimensionValues"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"OrchestratorLambdaServiceRoleDefaultPolicy32C2103A","roles":[{"Ref":"OrchestratorLambdaServiceRole403C7880"}]}}}}}}},"Code":{"id":"Code","path":"Immivo-Test/OrchestratorLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Test/OrchestratorLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Test/OrchestratorLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"a1c4457a6e947fde5b64310ee5ecab001785864e1725f2414a4dcb88b1f724d8.zip"},"environment":{"variables":{"STAGE":"test","DB_SECRET_ARN":{"Ref":"DBSecretD58955BC"},"DB_ENDPOINT":{"Fn::GetAtt":["PostgresInstance19CDD68A","Endpoint.Address"]},"USER_POOL_ID":{"Ref":"ImmivoUserPool48AD5837"},"CLIENT_ID":{"Ref":"ImmivoUserPoolImmivoClient41F7052B"},"ADMIN_USER_POOL_ID":{"Ref":"ImmivoAdminUserPool1121EFDE"},"ADMIN_CLIENT_ID":{"Ref":"ImmivoAdminUserPoolImmivoAdminClientC11B7155"},"APP_SECRET_ARN":"arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-test","BILLING_ENABLED":"false","DEPLOY_TS":"2026-02-25T14:53:12.207Z","MEDIA_BUCKET_NAME":{"Ref":"MediaBucketBCBB02BA"},"MEDIA_CDN_URL":"https://test-media.immivo.ai"}},"handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["OrchestratorLambdaServiceRole403C7880","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"timeout":120,"vpcConfig":{"subnetIds":[{"Ref":"ImmivoVPCPrivateSubnet1Subnet5717415A"},{"Ref":"ImmivoVPCPrivateSubnet2Subnet7191D4D3"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Test/OrchestratorLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"OrchestratorLambdaA7A0AD32"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"Immivo-Test/OrchestratorLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","invokeMode":"BUFFERED","targetFunctionArn":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"Immivo-Test/OrchestratorLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}},"invoke-function":{"id":"invoke-function","path":"Immivo-Test/OrchestratorLambda/invoke-function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"invokedViaFunctionUrl":true,"principal":"*"}}}}},"MediaBucket":{"id":"MediaBucket","path":"Immivo-Test/MediaBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/MediaBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","HEAD"],"allowedOrigins":["https://test.immivo.ai","https://app.immivo.ai","https://immivo.ai","https://www.immivo.ai","https://admin.immivo.ai"],"exposedHeaders":["Content-Length","Content-Type","ETag"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:cr-owned:public/:3701ac05","value":"true"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"Policy":{"id":"Policy","path":"Immivo-Test/MediaBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/MediaBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"MediaBucketBCBB02BA"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"MediaCDN30A5345E"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"OrchestratorFunctionUrl":{"id":"OrchestratorFunctionUrl","path":"Immivo-Test/OrchestratorFunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"OrchestratorApi":{"id":"OrchestratorApi","path":"Immivo-Test/OrchestratorApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.LambdaRestApi","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"binaryMediaTypes":["multipart/form-data","image/*","application/octet-stream"],"name":"OrchestratorApi","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"Deployment":{"id":"Deployment","path":"Immivo-Test/OrchestratorApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}},"DeploymentStage.test":{"id":"DeploymentStage.test","path":"Immivo-Test/OrchestratorApi/DeploymentStage.test","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/DeploymentStage.test/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"OrchestratorApiDeploymentD878F32Eb33b95ac301fb3fd7dc4633ef9040008"},"restApiId":{"Ref":"OrchestratorApiFA05180E"},"stageName":"test","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"Endpoint":{"id":"Endpoint","path":"Immivo-Test/OrchestratorApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"Default":{"id":"Default","path":"Immivo-Test/OrchestratorApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.236.0"},"children":{"OPTIONS":{"id":"OPTIONS","path":"Immivo-Test/OrchestratorApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Admin-Secret'","method.response.header.Access-Control-Allow-Origin":"'https://test.immivo.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://app.immivo.ai\" || $origin == \"https://immivo.ai\" || $origin == \"https://www.immivo.ai\" || $origin == \"https://admin.immivo.ai\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["OrchestratorApiFA05180E","RootResourceId"]},"restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}},"{proxy+}":{"id":"{proxy+}","path":"Immivo-Test/OrchestratorApi/Default/{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ProxyResource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/Default/{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["OrchestratorApiFA05180E","RootResourceId"]},"pathPart":"{proxy+}","restApiId":{"Ref":"OrchestratorApiFA05180E"}}}},"OPTIONS":{"id":"OPTIONS","path":"Immivo-Test/OrchestratorApi/Default/{proxy+}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/Default/{proxy+}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Admin-Secret'","method.response.header.Access-Control-Allow-Origin":"'https://test.immivo.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://app.immivo.ai\" || $origin == \"https://immivo.ai\" || $origin == \"https://www.immivo.ai\" || $origin == \"https://admin.immivo.ai\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"OrchestratorApiproxy426E8F4E"},"restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}},"ANY":{"id":"ANY","path":"Immivo-Test/OrchestratorApi/Default/{proxy+}/ANY","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.ImmivoTestOrchestratorApi107387D0.ANY..{proxy+}":{"id":"ApiPermission.ImmivoTestOrchestratorApi107387D0.ANY..{proxy+}","path":"Immivo-Test/OrchestratorApi/Default/{proxy+}/ANY/ApiPermission.ImmivoTestOrchestratorApi107387D0.ANY..{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-central-1:463090596988:",{"Ref":"OrchestratorApiFA05180E"},"/",{"Ref":"OrchestratorApiDeploymentStagetest5B74FABD"},"/*/*"]]}}}},"ApiPermission.Test.ImmivoTestOrchestratorApi107387D0.ANY..{proxy+}":{"id":"ApiPermission.Test.ImmivoTestOrchestratorApi107387D0.ANY..{proxy+}","path":"Immivo-Test/OrchestratorApi/Default/{proxy+}/ANY/ApiPermission.Test.ImmivoTestOrchestratorApi107387D0.ANY..{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-central-1:463090596988:",{"Ref":"OrchestratorApiFA05180E"},"/test-invoke-stage/*/*"]]}}}},"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/Default/{proxy+}/ANY/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"ANY","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-central-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"OrchestratorApiproxy426E8F4E"},"restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}}}},"ANY":{"id":"ANY","path":"Immivo-Test/OrchestratorApi/Default/ANY","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.ImmivoTestOrchestratorApi107387D0.ANY..":{"id":"ApiPermission.ImmivoTestOrchestratorApi107387D0.ANY..","path":"Immivo-Test/OrchestratorApi/Default/ANY/ApiPermission.ImmivoTestOrchestratorApi107387D0.ANY..","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-central-1:463090596988:",{"Ref":"OrchestratorApiFA05180E"},"/",{"Ref":"OrchestratorApiDeploymentStagetest5B74FABD"},"/*/"]]}}}},"ApiPermission.Test.ImmivoTestOrchestratorApi107387D0.ANY..":{"id":"ApiPermission.Test.ImmivoTestOrchestratorApi107387D0.ANY..","path":"Immivo-Test/OrchestratorApi/Default/ANY/ApiPermission.Test.ImmivoTestOrchestratorApi107387D0.ANY..","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-central-1:463090596988:",{"Ref":"OrchestratorApiFA05180E"},"/test-invoke-stage/*/"]]}}}},"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/Default/ANY/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"ANY","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-central-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Fn::GetAtt":["OrchestratorApiFA05180E","RootResourceId"]},"restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}}}},"Default4XX":{"id":"Default4XX","path":"Immivo-Test/OrchestratorApi/Default4XX","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/Default4XX/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'https://test.immivo.ai'","gatewayresponse.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Admin-Secret'","gatewayresponse.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,PATCH,OPTIONS'"},"responseType":"DEFAULT_4XX","restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}},"Default5XX":{"id":"Default5XX","path":"Immivo-Test/OrchestratorApi/Default5XX","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/OrchestratorApi/Default5XX/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'https://test.immivo.ai'","gatewayresponse.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Admin-Secret'","gatewayresponse.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,PATCH,OPTIONS'"},"responseType":"DEFAULT_5XX","restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}}}},"EmailIngestBucket":{"id":"EmailIngestBucket","path":"Immivo-Test/EmailIngestBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/EmailIngestBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":7,"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"Policy":{"id":"Policy","path":"Immivo-Test/EmailIngestBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/EmailIngestBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"EmailIngestBucketD823E4FB"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"Notifications":{"id":"Notifications","path":"Immivo-Test/EmailIngestBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/EmailIngestBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"AllowBucketNotificationsToImmivoTestEmailProcessor24B70991":{"id":"AllowBucketNotificationsToImmivoTestEmailProcessor24B70991","path":"Immivo-Test/EmailIngestBucket/AllowBucketNotificationsToImmivoTestEmailProcessor24B70991","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["EmailProcessor218EC076","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":"463090596988","sourceArn":{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]}}}}}},"EmailProcessor":{"id":"EmailProcessor","path":"Immivo-Test/EmailProcessor","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Test/EmailProcessor/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/EmailProcessor/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Test/EmailProcessor/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/EmailProcessor/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]},"/*"]]}]},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":["arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-test-??????",{"Ref":"DBSecretD58955BC"}]}],"Version":"2012-10-17"},"policyName":"EmailProcessorServiceRoleDefaultPolicy0B15DAB8","roles":[{"Ref":"EmailProcessorServiceRole637381CE"}]}}}}}}},"Code":{"id":"Code","path":"Immivo-Test/EmailProcessor/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Test/EmailProcessor/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Test/EmailProcessor/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Test/EmailProcessor/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"e43faa84e807b82a1b6ab4c0369726145445dec663b40a48de4b82bc1b38488a.zip"},"environment":{"variables":{"STAGE":"test","DB_SECRET_ARN":{"Ref":"DBSecretD58955BC"},"DB_ENDPOINT":{"Fn::GetAtt":["PostgresInstance19CDD68A","Endpoint.Address"]},"ORCHESTRATOR_API_URL":{"Fn::Join":["",["https://",{"Ref":"OrchestratorApiFA05180E"},".execute-api.eu-central-1.",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"OrchestratorApiDeploymentStagetest5B74FABD"},"/"]]},"APP_SECRET_ARN":"arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-test"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["EmailProcessorServiceRole637381CE","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Test/EmailProcessor/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/EmailProcessor/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"EmailProcessor218EC076"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"Immivo-Test/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Role":{"id":"Role","path":"Immivo-Test/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Test/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]}}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"Immivo-Test/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"FrontendLambda":{"id":"FrontendLambda","path":"Immivo-Test/FrontendLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Test/FrontendLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/FrontendLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"AssetImage":{"id":"AssetImage","path":"Immivo-Test/FrontendLambda/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.236.0"},"children":{"Staging":{"id":"Staging","path":"Immivo-Test/FrontendLambda/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"Repository":{"id":"Repository","path":"Immivo-Test/FrontendLambda/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Test/FrontendLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Sub":"463090596988.dkr.ecr.eu-central-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-463090596988-eu-central-1:2e16f8d426a6c4f5f2c9a11f31d7cfc20e1ae6229972f0a6fe1d80a43f903f2f"}},"environment":{"variables":{"RUNTIME_API_URL":{"Fn::Join":["",["https://",{"Ref":"OrchestratorApiFA05180E"},".execute-api.eu-central-1.",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"OrchestratorApiDeploymentStagetest5B74FABD"},"/"]]},"RUNTIME_STREAM_URL":{"Fn::GetAtt":["OrchestratorLambdaFunctionUrl11B98229","FunctionUrl"]},"RUNTIME_USER_POOL_ID":{"Ref":"ImmivoUserPool48AD5837"},"RUNTIME_USER_POOL_CLIENT_ID":{"Ref":"ImmivoUserPoolImmivoClient41F7052B"},"RUNTIME_ADMIN_USER_POOL_ID":{"Ref":"ImmivoAdminUserPool1121EFDE"},"RUNTIME_ADMIN_USER_POOL_CLIENT_ID":{"Ref":"ImmivoAdminUserPoolImmivoAdminClientC11B7155"},"RUNTIME_AWS_REGION":"eu-central-1","RUNTIME_MEDIA_CDN_URL":"https://test-media.immivo.ai","NEXT_PUBLIC_API_URL":{"Fn::Join":["",["https://",{"Ref":"OrchestratorApiFA05180E"},".execute-api.eu-central-1.",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"OrchestratorApiDeploymentStagetest5B74FABD"},"/"]]},"NEXT_PUBLIC_USER_POOL_ID":{"Ref":"ImmivoUserPool48AD5837"},"NEXT_PUBLIC_USER_POOL_CLIENT_ID":{"Ref":"ImmivoUserPoolImmivoClient41F7052B"},"NEXT_PUBLIC_AWS_REGION":"eu-central-1","PORT":"3000","AWS_LAMBDA_EXEC_WRAPPER":"/opt/extensions/lambda-adapter"}},"memorySize":2048,"packageType":"Image","role":{"Fn::GetAtt":["FrontendLambdaServiceRoleC530666C","Arn"]},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"timeout":30}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Test/FrontendLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/FrontendLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"FrontendLambda8ACF4B3B"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"Immivo-Test/FrontendLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/FrontendLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","targetFunctionArn":{"Fn::GetAtt":["FrontendLambda8ACF4B3B","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"Immivo-Test/FrontendLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["FrontendLambda8ACF4B3B","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}},"invoke-function":{"id":"invoke-function","path":"Immivo-Test/FrontendLambda/invoke-function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["FrontendLambda8ACF4B3B","Arn"]},"invokedViaFunctionUrl":true,"principal":"*"}}}}},"ImmivoZone":{"id":"ImmivoZone","path":"Immivo-Test/ImmivoZone","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"ImmivoCert":{"id":"ImmivoCert","path":"Immivo-Test/ImmivoCert","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"MediaOAC":{"id":"MediaOAC","path":"Immivo-Test/MediaOAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/MediaOAC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"description":"OAC for Immivo Media Bucket","name":"ImmivoTestMediaOAC8146DBFF","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}},"MediaCDN":{"id":"MediaCDN","path":"Immivo-Test/MediaCDN","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.236.0"},"children":{"Origin1":{"id":"Origin1","path":"Immivo-Test/MediaCDN/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Resource":{"id":"Resource","path":"Immivo-Test/MediaCDN/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["MediaBucketBCBB02BA","RegionalDomainName"]},"id":"ImmivoTestMediaCDNOrigin10818660C","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["MediaOACC4276BB0","Id"]}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"ImmivoTestMediaCDNOrigin10818660C","allowedMethods":["GET","HEAD"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"aliases":["test-media.immivo.ai"],"comment":"Immivo Media CDN (test)","httpVersion":"http2and3","ipv6Enabled":true,"priceClass":"PriceClass_100","viewerCertificate":{"acmCertificateArn":"arn:aws:acm:us-east-1:463090596988:certificate/b61f08cd-54f2-4f62-8e0a-9a69264e0436","minimumProtocolVersion":"TLSv1.3_2025","sslSupportMethod":"sni-only"}},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"MediaDnsRecord":{"id":"MediaDnsRecord","path":"Immivo-Test/MediaDnsRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/MediaDnsRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["MediaCDN30A5345E","DomainName"]}},"hostedZoneId":"Z10381383JI4OXGQXAULB","name":"test-media.immivo.ai.","type":"A"}}}}},"AWSCloudFrontPartitionHostedZoneIdMap":{"id":"AWSCloudFrontPartitionHostedZoneIdMap","path":"Immivo-Test/AWSCloudFrontPartitionHostedZoneIdMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.236.0"}},"LandingVideoDeploy":{"id":"LandingVideoDeploy","path":"Immivo-Test/LandingVideoDeploy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.236.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"Immivo-Test/LandingVideoDeploy/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.236.0"},"children":{"Code":{"id":"Code","path":"Immivo-Test/LandingVideoDeploy/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Test/LandingVideoDeploy/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Test/LandingVideoDeploy/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Test/LandingVideoDeploy/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"0cfdecad2260a3a84ad0c2d08a77e03c9d25e26c7b52f26b1e1faf97aef92f18.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"Immivo-Test/LandingVideoDeploy/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.236.0"}},"Asset1":{"id":"Asset1","path":"Immivo-Test/LandingVideoDeploy/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Test/LandingVideoDeploy/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Test/LandingVideoDeploy/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"CustomResource-2048MiB-2048MiB":{"id":"CustomResource-2048MiB-2048MiB","path":"Immivo-Test/LandingVideoDeploy/CustomResource-2048MiB-2048MiB","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.236.0"},"children":{"Default":{"id":"Default","path":"Immivo-Test/LandingVideoDeploy/CustomResource-2048MiB-2048MiB/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":["arn:aws:s3:::cdk-hnb659fds-assets-463090596988-eu-central-1","arn:aws:s3:::cdk-hnb659fds-assets-463090596988-eu-central-1/*"]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiBServiceRoleDefaultPolicyB72D5CB5","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiBServiceRoleE8335660"}]}}}}}}},"Code":{"id":"Code","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"3423a042b818e31c1e34a19d6689ab2e5f9b70fcbe9e71df66f241b20a200bd9.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"ephemeralStorage":{"size":2048},"handler":"index.handler","layers":[{"Ref":"LandingVideoDeployAwsCliLayer7FF82229"}],"memorySize":2048,"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiBServiceRoleE8335660","Arn"]},"runtime":"python3.13","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"timeout":900}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiBD44B8A53"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}}}},"FrontendCDN":{"id":"FrontendCDN","path":"Immivo-Test/FrontendCDN","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.236.0"},"children":{"Origin1":{"id":"Origin1","path":"Immivo-Test/FrontendCDN/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Resource":{"id":"Resource","path":"Immivo-Test/FrontendCDN/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::Select":[2,{"Fn::Split":["/",{"Fn::GetAtt":["FrontendLambdaFunctionUrl1B051328","FunctionUrl"]}]}]},"id":"ImmivoTestFrontendCDNOrigin12DA08DAA","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"ImmivoTestFrontendCDNOrigin12DA08DAA","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"b689b0a8-53d0-40ab-baf2-68738e2966ac","viewerProtocolPolicy":"redirect-to-https"},"aliases":["test.immivo.ai"],"cacheBehaviors":[{"pathPattern":"/_next/static/*","targetOriginId":"ImmivoTestFrontendCDNOrigin12DA08DAA","allowedMethods":["GET","HEAD"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"}],"comment":"Immivo Frontend (test)","httpVersion":"http2and3","ipv6Enabled":true,"priceClass":"PriceClass_100","viewerCertificate":{"acmCertificateArn":"arn:aws:acm:us-east-1:463090596988:certificate/b61f08cd-54f2-4f62-8e0a-9a69264e0436","minimumProtocolVersion":"TLSv1.3_2025","sslSupportMethod":"sni-only"}},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"FrontendDnsRecord":{"id":"FrontendDnsRecord","path":"Immivo-Test/FrontendDnsRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/FrontendDnsRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["FrontendCDNF4E135DE","DomainName"]}},"hostedZoneId":"Z10381383JI4OXGQXAULB","name":"test.immivo.ai.","type":"A"}}}}},"ApiCDN":{"id":"ApiCDN","path":"Immivo-Test/ApiCDN","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.236.0"},"children":{"Origin1":{"id":"Origin1","path":"Immivo-Test/ApiCDN/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Resource":{"id":"Resource","path":"Immivo-Test/ApiCDN/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::Select":[0,{"Fn::Split":["/",{"Fn::Select":[1,{"Fn::Split":["://",{"Fn::Join":["",["https://",{"Ref":"OrchestratorApiFA05180E"},".execute-api.eu-central-1.",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"OrchestratorApiDeploymentStagetest5B74FABD"},"/"]]}]}]}]}]},"id":"ImmivoTestApiCDNOrigin1ACF0186F","originPath":"/test","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"ImmivoTestApiCDNOrigin1ACF0186F","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"b689b0a8-53d0-40ab-baf2-68738e2966ac","viewerProtocolPolicy":"redirect-to-https"},"aliases":["test-api.immivo.ai"],"comment":"Immivo API (test)","httpVersion":"http2and3","ipv6Enabled":true,"priceClass":"PriceClass_100","viewerCertificate":{"acmCertificateArn":"arn:aws:acm:us-east-1:463090596988:certificate/b61f08cd-54f2-4f62-8e0a-9a69264e0436","minimumProtocolVersion":"TLSv1.3_2025","sslSupportMethod":"sni-only"}},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"ApiDnsRecord":{"id":"ApiDnsRecord","path":"Immivo-Test/ApiDnsRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/ApiDnsRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["ApiCDN1A2125ED","DomainName"]}},"hostedZoneId":"Z10381383JI4OXGQXAULB","name":"test-api.immivo.ai.","type":"A"}}}}},"FrontendCustomUrl":{"id":"FrontendCustomUrl","path":"Immivo-Test/FrontendCustomUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"ApiCustomUrl":{"id":"ApiCustomUrl","path":"Immivo-Test/ApiCustomUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"ApiWaf":{"id":"ApiWaf","path":"Immivo-Test/ApiWaf","constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACL","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACL","aws:cdk:cloudformation:props":{"defaultAction":{"allow":{}},"name":"Immivo-API-WAF-test","rules":[{"name":"AWSManagedRulesCommonRuleSet","priority":1,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesCommonRuleSet","excludedRules":[{"name":"SizeRestrictions_BODY"},{"name":"CrossSiteScripting_BODY"}]}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"CommonRules","sampledRequestsEnabled":true}},{"name":"AWSManagedRulesSQLiRuleSet","priority":2,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesSQLiRuleSet"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"SQLiRules","sampledRequestsEnabled":true}},{"name":"AWSManagedRulesKnownBadInputsRuleSet","priority":3,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesKnownBadInputsRuleSet"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"BadInputRules","sampledRequestsEnabled":true}},{"name":"RateLimit","priority":4,"action":{"block":{}},"statement":{"rateBasedStatement":{"limit":2000,"aggregateKeyType":"IP"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"RateLimit","sampledRequestsEnabled":true}}],"scope":"REGIONAL","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"ImmivoApiWaf-test","sampledRequestsEnabled":true}}}},"ApiWafAssociation":{"id":"ApiWafAssociation","path":"Immivo-Test/ApiWafAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACLAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACLAssociation","aws:cdk:cloudformation:props":{"resourceArn":{"Fn::Join":["",["arn:aws:apigateway:eu-central-1::/restapis/",{"Ref":"OrchestratorApiFA05180E"},"/stages/",{"Ref":"OrchestratorApiDeploymentStagetest5B74FABD"}]]},"webAclArn":{"Fn::GetAtt":["ApiWaf","Arn"]}}}},"CloudTrailBucket":{"id":"CloudTrailBucket","path":"Immivo-Test/CloudTrailBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/CloudTrailBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":90,"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"Policy":{"id":"Policy","path":"Immivo-Test/CloudTrailBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/CloudTrailBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"CloudTrailBucket98B0BFE1"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["CloudTrailBucket98B0BFE1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CloudTrailBucket98B0BFE1","Arn"]},"/*"]]}]},{"Action":"s3:GetBucketAcl","Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::GetAtt":["CloudTrailBucket98B0BFE1","Arn"]}},{"Action":"s3:PutObject","Condition":{"StringEquals":{"s3:x-amz-acl":"bucket-owner-full-control"}},"Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["CloudTrailBucket98B0BFE1","Arn"]},"/AWSLogs/463090596988/*"]]}}],"Version":"2012-10-17"}}}}}}}},"TrailLogGroup":{"id":"TrailLogGroup","path":"Immivo-Test/TrailLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/TrailLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/immivo/cloudtrail/test","retentionInDays":90,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}}}},"ImmivoTrail":{"id":"ImmivoTrail","path":"Immivo-Test/ImmivoTrail","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudtrail.Trail","version":"2.236.0"},"children":{"LogsRole":{"id":"LogsRole","path":"Immivo-Test/ImmivoTrail/LogsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/ImmivoTrail/LogsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Test/ImmivoTrail/LogsRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Test/ImmivoTrail/LogsRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TrailLogGroup7A1F916A","Arn"]}}],"Version":"2012-10-17"},"policyName":"ImmivoTrailLogsRoleDefaultPolicy8D03D805","roles":[{"Ref":"ImmivoTrailLogsRole9F4A9B8A"}]}}}}}}},"Resource":{"id":"Resource","path":"Immivo-Test/ImmivoTrail/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudtrail.CfnTrail","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudTrail::Trail","aws:cdk:cloudformation:props":{"cloudWatchLogsLogGroupArn":{"Fn::GetAtt":["TrailLogGroup7A1F916A","Arn"]},"cloudWatchLogsRoleArn":{"Fn::GetAtt":["ImmivoTrailLogsRole9F4A9B8A","Arn"]},"enableLogFileValidation":true,"eventSelectors":[],"includeGlobalServiceEvents":true,"isLogging":true,"isMultiRegionTrail":false,"s3BucketName":{"Ref":"CloudTrailBucket98B0BFE1"},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"test"}],"trailName":"Immivo-Trail-test"}}}}},"VpcId":{"id":"VpcId","path":"Immivo-Test/VpcId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"DBEndpoint":{"id":"DBEndpoint","path":"Immivo-Test/DBEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"EmailBucketName":{"id":"EmailBucketName","path":"Immivo-Test/EmailBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"MediaBucketName":{"id":"MediaBucketName","path":"Immivo-Test/MediaBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"MediaCDNUrl":{"id":"MediaCDNUrl","path":"Immivo-Test/MediaCDNUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"MediaDistributionId":{"id":"MediaDistributionId","path":"Immivo-Test/MediaDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"OrchestratorApiUrl":{"id":"OrchestratorApiUrl","path":"Immivo-Test/OrchestratorApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"FrontendUrl":{"id":"FrontendUrl","path":"Immivo-Test/FrontendUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"UserPoolId":{"id":"UserPoolId","path":"Immivo-Test/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"Immivo-Test/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"AdminUserPoolId":{"id":"AdminUserPoolId","path":"Immivo-Test/AdminUserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"AdminUserPoolClientId":{"id":"AdminUserPoolClientId","path":"Immivo-Test/AdminUserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"WafAclArn":{"id":"WafAclArn","path":"Immivo-Test/WafAclArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"Immivo-Test/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"Immivo-Test/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"Immivo-Test/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.236.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"Immivo-Test/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.236.0"}}}},"Immivo-Prod":{"id":"Immivo-Prod","path":"Immivo-Prod","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.236.0"},"children":{"ImmivoVPC":{"id":"ImmivoVPC","path":"Immivo-Prod/ImmivoVPC","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/ImmivoVPC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"Immivo-Prod/ImmivoVPC"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"Immivo-Prod/ImmivoVPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"Immivo-Prod/ImmivoVPC/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-central-1a","cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PublicSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"Acl":{"id":"Acl","path":"Immivo-Prod/ImmivoVPC/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"Immivo-Prod/ImmivoVPC/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PublicSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"Immivo-Prod/ImmivoVPC/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ImmivoVPCPublicSubnet1RouteTable7638AEB2"},"subnetId":{"Ref":"ImmivoVPCPublicSubnet1SubnetF66FB41A"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"Immivo-Prod/ImmivoVPC/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"ImmivoVPCIGWCE166DAC"},"routeTableId":{"Ref":"ImmivoVPCPublicSubnet1RouteTable7638AEB2"}}}},"EIP":{"id":"EIP","path":"Immivo-Prod/ImmivoVPC/PublicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PublicSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"NATGateway":{"id":"NATGateway","path":"Immivo-Prod/ImmivoVPC/PublicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["ImmivoVPCPublicSubnet1EIP6728BF6E","AllocationId"]},"subnetId":{"Ref":"ImmivoVPCPublicSubnet1SubnetF66FB41A"},"tags":[{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PublicSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"Immivo-Prod/ImmivoVPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"Immivo-Prod/ImmivoVPC/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-central-1b","cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PublicSubnet2"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"Acl":{"id":"Acl","path":"Immivo-Prod/ImmivoVPC/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"Immivo-Prod/ImmivoVPC/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PublicSubnet2"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"Immivo-Prod/ImmivoVPC/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ImmivoVPCPublicSubnet2RouteTable726D9D65"},"subnetId":{"Ref":"ImmivoVPCPublicSubnet2SubnetF03A036B"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"Immivo-Prod/ImmivoVPC/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"ImmivoVPCIGWCE166DAC"},"routeTableId":{"Ref":"ImmivoVPCPublicSubnet2RouteTable726D9D65"}}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-central-1a","cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PrivateSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"Acl":{"id":"Acl","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PrivateSubnet1"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ImmivoVPCPrivateSubnet1RouteTable1CC356B3"},"subnetId":{"Ref":"ImmivoVPCPrivateSubnet1Subnet5717415A"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"ImmivoVPCPublicSubnet1NATGateway302E4A39"},"routeTableId":{"Ref":"ImmivoVPCPrivateSubnet1RouteTable1CC356B3"}}}}}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"eu-central-1b","cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PrivateSubnet2"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"Acl":{"id":"Acl","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Prod/ImmivoVPC/PrivateSubnet2"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"ImmivoVPCPrivateSubnet2RouteTable537E4D6A"},"subnetId":{"Ref":"ImmivoVPCPrivateSubnet2Subnet7191D4D3"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"Immivo-Prod/ImmivoVPC/PrivateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"ImmivoVPCPublicSubnet1NATGateway302E4A39"},"routeTableId":{"Ref":"ImmivoVPCPrivateSubnet2RouteTable537E4D6A"}}}}}},"IGW":{"id":"IGW","path":"Immivo-Prod/ImmivoVPC/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"Immivo-Prod/ImmivoVPC"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"VPCGW":{"id":"VPCGW","path":"Immivo-Prod/ImmivoVPC/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"ImmivoVPCIGWCE166DAC"},"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"Immivo-Prod/ImmivoVPC/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.236.0"},"children":{"Default":{"id":"Default","path":"Immivo-Prod/ImmivoVPC/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"Immivo-Prod/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.236.0"},"children":{"Staging":{"id":"Staging","path":"Immivo-Prod/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"Role":{"id":"Role","path":"Immivo-Prod/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}},"Handler":{"id":"Handler","path":"Immivo-Prod/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"DBSecret":{"id":"DBSecret","path":"Immivo-Prod/DBSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/DBSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{"secretStringTemplate":"{\"username\":\"postgres\"}","excludePunctuation":true,"includeSpace":false,"generateStringKey":"password"},"name":"Immivo-DB-Secret-prod","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"Attachment":{"id":"Attachment","path":"Immivo-Prod/DBSecret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/DBSecret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DBSecretD58955BC"},"targetId":{"Ref":"AuroraCluster23D869C0"},"targetType":"AWS::RDS::DBCluster"}}}}}}},"DBSecurityGroup":{"id":"DBSecurityGroup","path":"Immivo-Prod/DBSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/DBSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Allow access to DB","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}},"from ImmivoProdLambdaSecurityGroup49712525:5432":{"id":"from ImmivoProdLambdaSecurityGroup49712525:5432","path":"Immivo-Prod/DBSecurityGroup/from ImmivoProdLambdaSecurityGroup49712525:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Lambda (VPC) to reach DB","fromPort":5432,"groupId":{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]},"toPort":5432}}}}},"LambdaSecurityGroup":{"id":"LambdaSecurityGroup","path":"Immivo-Prod/LambdaSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/LambdaSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Orchestrator Lambda - allows all outbound via NAT Gateway","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcId":{"Ref":"ImmivoVPCB1C78292"}}}}}},"AuroraCluster":{"id":"AuroraCluster","path":"Immivo-Prod/AuroraCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseCluster","version":"2.236.0"},"children":{"Subnets":{"id":"Subnets","path":"Immivo-Prod/AuroraCluster/Subnets","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.236.0"},"children":{"Default":{"id":"Default","path":"Immivo-Prod/AuroraCluster/Subnets/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnets for AuroraCluster database","subnetIds":[{"Ref":"ImmivoVPCPrivateSubnet1Subnet5717415A"},{"Ref":"ImmivoVPCPrivateSubnet2Subnet7191D4D3"}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}},"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup":{"id":"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","path":"Immivo-Prod/AuroraCluster/AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"Resource":{"id":"Resource","path":"Immivo-Prod/AuroraCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBCluster","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBCluster","aws:cdk:cloudformation:props":{"copyTagsToSnapshot":true,"databaseName":"immivo","dbClusterParameterGroupName":"default.aurora-postgresql16","dbSubnetGroupName":{"Ref":"AuroraClusterSubnetsF3E9E6AD"},"deletionProtection":true,"engine":"aurora-postgresql","engineVersion":"16.6","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:password::}}"]]},"port":5432,"serverlessV2ScalingConfiguration":{"minCapacity":0.5,"maxCapacity":4},"storageEncrypted":true,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"vpcSecurityGroupIds":[{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]}]}}},"Writer":{"id":"Writer","path":"Immivo-Prod/AuroraCluster/Writer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/AuroraCluster/Writer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"dbClusterIdentifier":{"Ref":"AuroraCluster23D869C0"},"dbInstanceClass":"db.serverless","engine":"aurora-postgresql","promotionTier":0,"publiclyAccessible":false,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}}}},"CognitoEmailKmsKey":{"id":"CognitoEmailKmsKey","path":"Immivo-Prod/CognitoEmailKmsKey","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Key","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/CognitoEmailKmsKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnKey","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Key","aws:cdk:cloudformation:props":{"description":"Immivo Cognito Email Sender KMS Key (prod)","enableKeyRotation":true,"keyPolicy":{"Statement":[{"Action":"kms:*","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::463090596988:root"},"Resource":"*"},{"Action":["kms:CreateGrant","kms:Encrypt"],"Effect":"Allow","Principal":{"Service":"cognito-idp.amazonaws.com"},"Resource":"*"}],"Version":"2012-10-17"},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"Alias":{"id":"Alias","path":"Immivo-Prod/CognitoEmailKmsKey/Alias","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Alias","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/CognitoEmailKmsKey/Alias/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnAlias","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Alias","aws:cdk:cloudformation:props":{"aliasName":"alias/immivo-cognito-email-prod","targetKeyId":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]}}}}}}}},"CustomEmailSenderLambda":{"id":"CustomEmailSenderLambda","path":"Immivo-Prod/CustomEmailSenderLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Prod/CustomEmailSenderLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/CustomEmailSenderLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Prod/CustomEmailSenderLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/CustomEmailSenderLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"kms:Decrypt","Effect":"Allow","Resource":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":"arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-prod-??????"}],"Version":"2012-10-17"},"policyName":"CustomEmailSenderLambdaServiceRoleDefaultPolicy77D6D2A2","roles":[{"Ref":"CustomEmailSenderLambdaServiceRoleA213E962"}]}}}}}}},"Code":{"id":"Code","path":"Immivo-Prod/CustomEmailSenderLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Prod/CustomEmailSenderLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Prod/CustomEmailSenderLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/CustomEmailSenderLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"618e00fc5df27b7edab44d5517b91ad2da8cba71dd93bfc27b6b02c4002050ec.zip"},"environment":{"variables":{"KEY_ARN":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]},"APP_SECRET_ARN":"arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-prod"}},"functionName":"Immivo-CustomEmailSender-prod","handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["CustomEmailSenderLambdaServiceRoleA213E962","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"timeout":30}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Prod/CustomEmailSenderLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/CustomEmailSenderLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CustomEmailSenderLambdaA1C15DAA"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}}}},"ImmivoUserPool":{"id":"ImmivoUserPool","path":"Immivo-Prod/ImmivoUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.236.0"},"children":{"CustomEmailSenderCognito":{"id":"CustomEmailSenderCognito","path":"Immivo-Prod/ImmivoUserPool/CustomEmailSenderCognito","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CustomEmailSenderLambdaA1C15DAA","Arn"]},"principal":"cognito-idp.amazonaws.com","sourceArn":{"Fn::GetAtt":["ImmivoUserPool48AD5837","Arn"]}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/ImmivoUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","lambdaConfig":{"kmsKeyId":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]},"customEmailSender":{"lambdaArn":{"Fn::GetAtt":["CustomEmailSenderLambdaA1C15DAA","Arn"]},"lambdaVersion":"V1_0"}},"policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true}},"schema":[{"name":"given_name","mutable":true,"required":true},{"name":"family_name","mutable":true,"required":true},{"name":"phone_number","mutable":true,"required":false},{"name":"address","mutable":true,"required":false},{"name":"company_name","attributeDataType":"String","mutable":true},{"name":"postal_code","attributeDataType":"String","mutable":true},{"name":"city","attributeDataType":"String","mutable":true},{"name":"country","attributeDataType":"String","mutable":true}],"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"Project":"Immivo","Stage":"prod"},"usernameAttributes":["email"],"userPoolName":"Immivo-Users-prod","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ImmivoClient":{"id":"ImmivoClient","path":"Immivo-Prod/ImmivoUserPool/ImmivoClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/ImmivoUserPool/ImmivoClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"Immivo-Client-prod","explicitAuthFlows":["ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"ImmivoUserPool48AD5837"}}}}}}}},"ImmivoAdminUserPool":{"id":"ImmivoAdminUserPool","path":"Immivo-Prod/ImmivoAdminUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.236.0"},"children":{"CustomEmailSenderCognito":{"id":"CustomEmailSenderCognito","path":"Immivo-Prod/ImmivoAdminUserPool/CustomEmailSenderCognito","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CustomEmailSenderLambdaA1C15DAA","Arn"]},"principal":"cognito-idp.amazonaws.com","sourceArn":{"Fn::GetAtt":["ImmivoAdminUserPool1121EFDE","Arn"]}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/ImmivoAdminUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","lambdaConfig":{"kmsKeyId":{"Fn::GetAtt":["CognitoEmailKmsKey6CC02FC5","Arn"]},"customEmailSender":{"lambdaArn":{"Fn::GetAtt":["CustomEmailSenderLambdaA1C15DAA","Arn"]},"lambdaVersion":"V1_0"}},"policies":{"passwordPolicy":{"minimumLength":12,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"given_name","mutable":true,"required":true},{"name":"family_name","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"Project":"Immivo","Stage":"prod"},"usernameAttributes":["email"],"userPoolName":"Immivo-Admins-prod","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ImmivoAdminClient":{"id":"ImmivoAdminClient","path":"Immivo-Prod/ImmivoAdminUserPool/ImmivoAdminClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/ImmivoAdminUserPool/ImmivoAdminClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"Immivo-Admin-Client-prod","explicitAuthFlows":["ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"ImmivoAdminUserPool1121EFDE"}}}}}}}},"AppSecret":{"id":"AppSecret","path":"Immivo-Prod/AppSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"OrchestratorLambda":{"id":"OrchestratorLambda","path":"Immivo-Prod/OrchestratorLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Prod/OrchestratorLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Prod/OrchestratorLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}]},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":["arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-prod-??????",{"Ref":"DBSecretD58955BC"}]},{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:AdminUpdateUserAttributes","cognito-idp:ListUsers"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ImmivoAdminUserPool1121EFDE","Arn"]},{"Fn::GetAtt":["ImmivoUserPool48AD5837","Arn"]}]},{"Action":["ce:GetCostAndUsage","ce:GetCostForecast","ce:GetDimensionValues"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"OrchestratorLambdaServiceRoleDefaultPolicy32C2103A","roles":[{"Ref":"OrchestratorLambdaServiceRole403C7880"}]}}}}}}},"Code":{"id":"Code","path":"Immivo-Prod/OrchestratorLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Prod/OrchestratorLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Prod/OrchestratorLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"a1c4457a6e947fde5b64310ee5ecab001785864e1725f2414a4dcb88b1f724d8.zip"},"environment":{"variables":{"STAGE":"prod","DB_SECRET_ARN":{"Ref":"DBSecretD58955BC"},"DB_ENDPOINT":{"Fn::GetAtt":["AuroraCluster23D869C0","Endpoint.Address"]},"USER_POOL_ID":{"Ref":"ImmivoUserPool48AD5837"},"CLIENT_ID":{"Ref":"ImmivoUserPoolImmivoClient41F7052B"},"ADMIN_USER_POOL_ID":{"Ref":"ImmivoAdminUserPool1121EFDE"},"ADMIN_CLIENT_ID":{"Ref":"ImmivoAdminUserPoolImmivoAdminClientC11B7155"},"APP_SECRET_ARN":"arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-prod","BILLING_ENABLED":"false","DEPLOY_TS":"2026-02-25T14:53:21.933Z","MEDIA_BUCKET_NAME":{"Ref":"MediaBucketBCBB02BA"},"MEDIA_CDN_URL":"https://media.immivo.ai"}},"handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["OrchestratorLambdaServiceRole403C7880","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"timeout":120,"vpcConfig":{"subnetIds":[{"Ref":"ImmivoVPCPrivateSubnet1Subnet5717415A"},{"Ref":"ImmivoVPCPrivateSubnet2Subnet7191D4D3"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Prod/OrchestratorLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"OrchestratorLambdaA7A0AD32"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"Immivo-Prod/OrchestratorLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","invokeMode":"BUFFERED","targetFunctionArn":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"Immivo-Prod/OrchestratorLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}},"invoke-function":{"id":"invoke-function","path":"Immivo-Prod/OrchestratorLambda/invoke-function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"invokedViaFunctionUrl":true,"principal":"*"}}}}},"MediaBucket":{"id":"MediaBucket","path":"Immivo-Prod/MediaBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/MediaBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","HEAD"],"allowedOrigins":["https://test.immivo.ai","https://app.immivo.ai","https://immivo.ai","https://www.immivo.ai","https://admin.immivo.ai"],"exposedHeaders":["Content-Length","Content-Type","ETag"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:cr-owned:public/:19c62b89","value":"true"},{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"Immivo-Prod/MediaBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/MediaBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"MediaBucketBCBB02BA"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"MediaCDN30A5345E"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"OrchestratorFunctionUrl":{"id":"OrchestratorFunctionUrl","path":"Immivo-Prod/OrchestratorFunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"OrchestratorApi":{"id":"OrchestratorApi","path":"Immivo-Prod/OrchestratorApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.LambdaRestApi","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"binaryMediaTypes":["multipart/form-data","image/*","application/octet-stream"],"name":"OrchestratorApi","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"Deployment":{"id":"Deployment","path":"Immivo-Prod/OrchestratorApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"Immivo-Prod/OrchestratorApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"OrchestratorApiDeploymentD878F32Eb4ddc79adff3504e98e0b8121df783f2"},"restApiId":{"Ref":"OrchestratorApiFA05180E"},"stageName":"prod","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}},"Endpoint":{"id":"Endpoint","path":"Immivo-Prod/OrchestratorApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"Default":{"id":"Default","path":"Immivo-Prod/OrchestratorApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.236.0"},"children":{"OPTIONS":{"id":"OPTIONS","path":"Immivo-Prod/OrchestratorApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Admin-Secret'","method.response.header.Access-Control-Allow-Origin":"'https://test.immivo.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://app.immivo.ai\" || $origin == \"https://immivo.ai\" || $origin == \"https://www.immivo.ai\" || $origin == \"https://admin.immivo.ai\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["OrchestratorApiFA05180E","RootResourceId"]},"restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}},"{proxy+}":{"id":"{proxy+}","path":"Immivo-Prod/OrchestratorApi/Default/{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ProxyResource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/Default/{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["OrchestratorApiFA05180E","RootResourceId"]},"pathPart":"{proxy+}","restApiId":{"Ref":"OrchestratorApiFA05180E"}}}},"OPTIONS":{"id":"OPTIONS","path":"Immivo-Prod/OrchestratorApi/Default/{proxy+}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/Default/{proxy+}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Admin-Secret'","method.response.header.Access-Control-Allow-Origin":"'https://test.immivo.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://app.immivo.ai\" || $origin == \"https://immivo.ai\" || $origin == \"https://www.immivo.ai\" || $origin == \"https://admin.immivo.ai\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"OrchestratorApiproxy426E8F4E"},"restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}},"ANY":{"id":"ANY","path":"Immivo-Prod/OrchestratorApi/Default/{proxy+}/ANY","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.ImmivoProdOrchestratorApiEF8DA01C.ANY..{proxy+}":{"id":"ApiPermission.ImmivoProdOrchestratorApiEF8DA01C.ANY..{proxy+}","path":"Immivo-Prod/OrchestratorApi/Default/{proxy+}/ANY/ApiPermission.ImmivoProdOrchestratorApiEF8DA01C.ANY..{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-central-1:463090596988:",{"Ref":"OrchestratorApiFA05180E"},"/",{"Ref":"OrchestratorApiDeploymentStageprod82FCF960"},"/*/*"]]}}}},"ApiPermission.Test.ImmivoProdOrchestratorApiEF8DA01C.ANY..{proxy+}":{"id":"ApiPermission.Test.ImmivoProdOrchestratorApiEF8DA01C.ANY..{proxy+}","path":"Immivo-Prod/OrchestratorApi/Default/{proxy+}/ANY/ApiPermission.Test.ImmivoProdOrchestratorApiEF8DA01C.ANY..{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-central-1:463090596988:",{"Ref":"OrchestratorApiFA05180E"},"/test-invoke-stage/*/*"]]}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/Default/{proxy+}/ANY/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"ANY","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-central-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"OrchestratorApiproxy426E8F4E"},"restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}}}},"ANY":{"id":"ANY","path":"Immivo-Prod/OrchestratorApi/Default/ANY","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.ImmivoProdOrchestratorApiEF8DA01C.ANY..":{"id":"ApiPermission.ImmivoProdOrchestratorApiEF8DA01C.ANY..","path":"Immivo-Prod/OrchestratorApi/Default/ANY/ApiPermission.ImmivoProdOrchestratorApiEF8DA01C.ANY..","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-central-1:463090596988:",{"Ref":"OrchestratorApiFA05180E"},"/",{"Ref":"OrchestratorApiDeploymentStageprod82FCF960"},"/*/"]]}}}},"ApiPermission.Test.ImmivoProdOrchestratorApiEF8DA01C.ANY..":{"id":"ApiPermission.Test.ImmivoProdOrchestratorApiEF8DA01C.ANY..","path":"Immivo-Prod/OrchestratorApi/Default/ANY/ApiPermission.Test.ImmivoProdOrchestratorApiEF8DA01C.ANY..","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-central-1:463090596988:",{"Ref":"OrchestratorApiFA05180E"},"/test-invoke-stage/*/"]]}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/Default/ANY/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"ANY","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-central-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrchestratorLambdaA7A0AD32","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Fn::GetAtt":["OrchestratorApiFA05180E","RootResourceId"]},"restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}}}},"Default4XX":{"id":"Default4XX","path":"Immivo-Prod/OrchestratorApi/Default4XX","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/Default4XX/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'https://app.immivo.ai'","gatewayresponse.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Admin-Secret'","gatewayresponse.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,PATCH,OPTIONS'"},"responseType":"DEFAULT_4XX","restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}},"Default5XX":{"id":"Default5XX","path":"Immivo-Prod/OrchestratorApi/Default5XX","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/OrchestratorApi/Default5XX/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'https://app.immivo.ai'","gatewayresponse.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Admin-Secret'","gatewayresponse.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,PATCH,OPTIONS'"},"responseType":"DEFAULT_5XX","restApiId":{"Ref":"OrchestratorApiFA05180E"}}}}}}}},"EmailIngestBucket":{"id":"EmailIngestBucket","path":"Immivo-Prod/EmailIngestBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/EmailIngestBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":7,"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"Policy":{"id":"Policy","path":"Immivo-Prod/EmailIngestBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/EmailIngestBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"EmailIngestBucketD823E4FB"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"Notifications":{"id":"Notifications","path":"Immivo-Prod/EmailIngestBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/EmailIngestBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"AllowBucketNotificationsToImmivoProdEmailProcessor68CB3E02":{"id":"AllowBucketNotificationsToImmivoProdEmailProcessor68CB3E02","path":"Immivo-Prod/EmailIngestBucket/AllowBucketNotificationsToImmivoProdEmailProcessor68CB3E02","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["EmailProcessor218EC076","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":"463090596988","sourceArn":{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]}}}}}},"EmailProcessor":{"id":"EmailProcessor","path":"Immivo-Prod/EmailProcessor","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Prod/EmailProcessor/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/EmailProcessor/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Prod/EmailProcessor/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/EmailProcessor/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]},"/*"]]}]},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":["arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-prod-??????",{"Ref":"DBSecretD58955BC"}]}],"Version":"2012-10-17"},"policyName":"EmailProcessorServiceRoleDefaultPolicy0B15DAB8","roles":[{"Ref":"EmailProcessorServiceRole637381CE"}]}}}}}}},"Code":{"id":"Code","path":"Immivo-Prod/EmailProcessor/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Prod/EmailProcessor/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Prod/EmailProcessor/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/EmailProcessor/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"e43faa84e807b82a1b6ab4c0369726145445dec663b40a48de4b82bc1b38488a.zip"},"environment":{"variables":{"STAGE":"prod","DB_SECRET_ARN":{"Ref":"DBSecretD58955BC"},"DB_ENDPOINT":{"Fn::GetAtt":["AuroraCluster23D869C0","Endpoint.Address"]},"ORCHESTRATOR_API_URL":{"Fn::Join":["",["https://",{"Ref":"OrchestratorApiFA05180E"},".execute-api.eu-central-1.",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"OrchestratorApiDeploymentStageprod82FCF960"},"/"]]},"APP_SECRET_ARN":"arn:aws:secretsmanager:eu-central-1:463090596988:secret:Immivo-App-Secret-prod"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["EmailProcessorServiceRole637381CE","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Prod/EmailProcessor/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/EmailProcessor/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"EmailProcessor218EC076"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"Immivo-Prod/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Role":{"id":"Role","path":"Immivo-Prod/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Prod/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":{"Fn::GetAtt":["EmailIngestBucketD823E4FB","Arn"]}}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"FrontendLambda":{"id":"FrontendLambda","path":"Immivo-Prod/FrontendLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Prod/FrontendLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/FrontendLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}},"AssetImage":{"id":"AssetImage","path":"Immivo-Prod/FrontendLambda/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.236.0"},"children":{"Staging":{"id":"Staging","path":"Immivo-Prod/FrontendLambda/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"Repository":{"id":"Repository","path":"Immivo-Prod/FrontendLambda/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/FrontendLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Sub":"463090596988.dkr.ecr.eu-central-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-463090596988-eu-central-1:f396e6e3cc3c20430d5af83f72d6392ef02ca35a1a3d6e9ffdc91a29c8eef27c"}},"environment":{"variables":{"RUNTIME_API_URL":{"Fn::Join":["",["https://",{"Ref":"OrchestratorApiFA05180E"},".execute-api.eu-central-1.",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"OrchestratorApiDeploymentStageprod82FCF960"},"/"]]},"RUNTIME_STREAM_URL":{"Fn::GetAtt":["OrchestratorLambdaFunctionUrl11B98229","FunctionUrl"]},"RUNTIME_USER_POOL_ID":{"Ref":"ImmivoUserPool48AD5837"},"RUNTIME_USER_POOL_CLIENT_ID":{"Ref":"ImmivoUserPoolImmivoClient41F7052B"},"RUNTIME_ADMIN_USER_POOL_ID":{"Ref":"ImmivoAdminUserPool1121EFDE"},"RUNTIME_ADMIN_USER_POOL_CLIENT_ID":{"Ref":"ImmivoAdminUserPoolImmivoAdminClientC11B7155"},"RUNTIME_AWS_REGION":"eu-central-1","RUNTIME_MEDIA_CDN_URL":"https://media.immivo.ai","NEXT_PUBLIC_API_URL":{"Fn::Join":["",["https://",{"Ref":"OrchestratorApiFA05180E"},".execute-api.eu-central-1.",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"OrchestratorApiDeploymentStageprod82FCF960"},"/"]]},"NEXT_PUBLIC_USER_POOL_ID":{"Ref":"ImmivoUserPool48AD5837"},"NEXT_PUBLIC_USER_POOL_CLIENT_ID":{"Ref":"ImmivoUserPoolImmivoClient41F7052B"},"NEXT_PUBLIC_AWS_REGION":"eu-central-1","PORT":"3000","AWS_LAMBDA_EXEC_WRAPPER":"/opt/extensions/lambda-adapter"}},"memorySize":2048,"packageType":"Image","role":{"Fn::GetAtt":["FrontendLambdaServiceRoleC530666C","Arn"]},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"timeout":30}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Prod/FrontendLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/FrontendLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"FrontendLambda8ACF4B3B"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"Immivo-Prod/FrontendLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/FrontendLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","targetFunctionArn":{"Fn::GetAtt":["FrontendLambda8ACF4B3B","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"Immivo-Prod/FrontendLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["FrontendLambda8ACF4B3B","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}},"invoke-function":{"id":"invoke-function","path":"Immivo-Prod/FrontendLambda/invoke-function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["FrontendLambda8ACF4B3B","Arn"]},"invokedViaFunctionUrl":true,"principal":"*"}}}}},"ImmivoZone":{"id":"ImmivoZone","path":"Immivo-Prod/ImmivoZone","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"ImmivoCert":{"id":"ImmivoCert","path":"Immivo-Prod/ImmivoCert","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"MediaOAC":{"id":"MediaOAC","path":"Immivo-Prod/MediaOAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/MediaOAC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"description":"OAC for Immivo Media Bucket","name":"ImmivoProdMediaOAC337A226F","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}},"MediaCDN":{"id":"MediaCDN","path":"Immivo-Prod/MediaCDN","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.236.0"},"children":{"Origin1":{"id":"Origin1","path":"Immivo-Prod/MediaCDN/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Resource":{"id":"Resource","path":"Immivo-Prod/MediaCDN/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["MediaBucketBCBB02BA","RegionalDomainName"]},"id":"ImmivoProdMediaCDNOrigin1D467EB9C","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["MediaOACC4276BB0","Id"]}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"ImmivoProdMediaCDNOrigin1D467EB9C","allowedMethods":["GET","HEAD"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"aliases":["media.immivo.ai"],"comment":"Immivo Media CDN (prod)","httpVersion":"http2and3","ipv6Enabled":true,"priceClass":"PriceClass_100","viewerCertificate":{"acmCertificateArn":"arn:aws:acm:us-east-1:463090596988:certificate/b61f08cd-54f2-4f62-8e0a-9a69264e0436","minimumProtocolVersion":"TLSv1.3_2025","sslSupportMethod":"sni-only"}},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}},"MediaDnsRecord":{"id":"MediaDnsRecord","path":"Immivo-Prod/MediaDnsRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/MediaDnsRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["MediaCDN30A5345E","DomainName"]}},"hostedZoneId":"Z10381383JI4OXGQXAULB","name":"media.immivo.ai.","type":"A"}}}}},"AWSCloudFrontPartitionHostedZoneIdMap":{"id":"AWSCloudFrontPartitionHostedZoneIdMap","path":"Immivo-Prod/AWSCloudFrontPartitionHostedZoneIdMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.236.0"}},"SesDkimRecord1":{"id":"SesDkimRecord1","path":"Immivo-Prod/SesDkimRecord1","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CnameRecord","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/SesDkimRecord1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"hostedZoneId":"Z10381383JI4OXGQXAULB","name":"cztec6cd7jjiptw5pipfdicp37v3jngr._domainkey.immivo.ai.","resourceRecords":["cztec6cd7jjiptw5pipfdicp37v3jngr.dkim.amazonses.com"],"ttl":"1800","type":"CNAME"}}}}},"SesDkimRecord2":{"id":"SesDkimRecord2","path":"Immivo-Prod/SesDkimRecord2","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CnameRecord","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/SesDkimRecord2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"hostedZoneId":"Z10381383JI4OXGQXAULB","name":"cb5vtkh7c7tprv2uqrcmwdzkkzcuohxc._domainkey.immivo.ai.","resourceRecords":["cb5vtkh7c7tprv2uqrcmwdzkkzcuohxc.dkim.amazonses.com"],"ttl":"1800","type":"CNAME"}}}}},"SesDkimRecord3":{"id":"SesDkimRecord3","path":"Immivo-Prod/SesDkimRecord3","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CnameRecord","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/SesDkimRecord3/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"hostedZoneId":"Z10381383JI4OXGQXAULB","name":"q6tkl6njuisz6jhxdized6ry7fq2ao2f._domainkey.immivo.ai.","resourceRecords":["q6tkl6njuisz6jhxdized6ry7fq2ao2f.dkim.amazonses.com"],"ttl":"1800","type":"CNAME"}}}}},"LandingVideoDeploy":{"id":"LandingVideoDeploy","path":"Immivo-Prod/LandingVideoDeploy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.236.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"Immivo-Prod/LandingVideoDeploy/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.236.0"},"children":{"Code":{"id":"Code","path":"Immivo-Prod/LandingVideoDeploy/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Prod/LandingVideoDeploy/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Prod/LandingVideoDeploy/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/LandingVideoDeploy/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"0cfdecad2260a3a84ad0c2d08a77e03c9d25e26c7b52f26b1e1faf97aef92f18.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"Immivo-Prod/LandingVideoDeploy/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.236.0"}},"Asset1":{"id":"Asset1","path":"Immivo-Prod/LandingVideoDeploy/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Prod/LandingVideoDeploy/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Prod/LandingVideoDeploy/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"CustomResource-2048MiB-2048MiB":{"id":"CustomResource-2048MiB-2048MiB","path":"Immivo-Prod/LandingVideoDeploy/CustomResource-2048MiB-2048MiB","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.236.0"},"children":{"Default":{"id":"Default","path":"Immivo-Prod/LandingVideoDeploy/CustomResource-2048MiB-2048MiB/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":["arn:aws:s3:::cdk-hnb659fds-assets-463090596988-eu-central-1","arn:aws:s3:::cdk-hnb659fds-assets-463090596988-eu-central-1/*"]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiBServiceRoleDefaultPolicyB72D5CB5","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiBServiceRoleE8335660"}]}}}}}}},"Code":{"id":"Code","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-463090596988-eu-central-1","s3Key":"3423a042b818e31c1e34a19d6689ab2e5f9b70fcbe9e71df66f241b20a200bd9.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"ephemeralStorage":{"size":2048},"handler":"index.handler","layers":[{"Ref":"LandingVideoDeployAwsCliLayer7FF82229"}],"memorySize":2048,"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiBServiceRoleE8335660","Arn"]},"runtime":"python3.13","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"timeout":900}}},"LogGroup":{"id":"LogGroup","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiB/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB2048MiBD44B8A53"}]]},"retentionInDays":731,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}}}},"ApiWaf":{"id":"ApiWaf","path":"Immivo-Prod/ApiWaf","constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACL","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACL","aws:cdk:cloudformation:props":{"defaultAction":{"allow":{}},"name":"Immivo-API-WAF-prod","rules":[{"name":"AWSManagedRulesCommonRuleSet","priority":1,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesCommonRuleSet","excludedRules":[{"name":"SizeRestrictions_BODY"},{"name":"CrossSiteScripting_BODY"}]}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"CommonRules","sampledRequestsEnabled":true}},{"name":"AWSManagedRulesSQLiRuleSet","priority":2,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesSQLiRuleSet"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"SQLiRules","sampledRequestsEnabled":true}},{"name":"AWSManagedRulesKnownBadInputsRuleSet","priority":3,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesKnownBadInputsRuleSet"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"BadInputRules","sampledRequestsEnabled":true}},{"name":"RateLimit","priority":4,"action":{"block":{}},"statement":{"rateBasedStatement":{"limit":2000,"aggregateKeyType":"IP"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"RateLimit","sampledRequestsEnabled":true}}],"scope":"REGIONAL","tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"ImmivoApiWaf-prod","sampledRequestsEnabled":true}}}},"ApiWafAssociation":{"id":"ApiWafAssociation","path":"Immivo-Prod/ApiWafAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACLAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACLAssociation","aws:cdk:cloudformation:props":{"resourceArn":{"Fn::Join":["",["arn:aws:apigateway:eu-central-1::/restapis/",{"Ref":"OrchestratorApiFA05180E"},"/stages/",{"Ref":"OrchestratorApiDeploymentStageprod82FCF960"}]]},"webAclArn":{"Fn::GetAtt":["ApiWaf","Arn"]}}}},"CloudTrailBucket":{"id":"CloudTrailBucket","path":"Immivo-Prod/CloudTrailBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/CloudTrailBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":90,"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"Policy":{"id":"Policy","path":"Immivo-Prod/CloudTrailBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/CloudTrailBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"CloudTrailBucket98B0BFE1"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["CloudTrailBucket98B0BFE1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CloudTrailBucket98B0BFE1","Arn"]},"/*"]]}]},{"Action":"s3:GetBucketAcl","Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::GetAtt":["CloudTrailBucket98B0BFE1","Arn"]}},{"Action":"s3:PutObject","Condition":{"StringEquals":{"s3:x-amz-acl":"bucket-owner-full-control"}},"Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["CloudTrailBucket98B0BFE1","Arn"]},"/AWSLogs/463090596988/*"]]}}],"Version":"2012-10-17"}}}}}}}},"TrailLogGroup":{"id":"TrailLogGroup","path":"Immivo-Prod/TrailLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/TrailLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/immivo/cloudtrail/prod","retentionInDays":90,"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}}}},"ImmivoTrail":{"id":"ImmivoTrail","path":"Immivo-Prod/ImmivoTrail","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudtrail.Trail","version":"2.236.0"},"children":{"LogsRole":{"id":"LogsRole","path":"Immivo-Prod/ImmivoTrail/LogsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/ImmivoTrail/LogsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Immivo-Prod/ImmivoTrail/LogsRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"Immivo-Prod/ImmivoTrail/LogsRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TrailLogGroup7A1F916A","Arn"]}}],"Version":"2012-10-17"},"policyName":"ImmivoTrailLogsRoleDefaultPolicy8D03D805","roles":[{"Ref":"ImmivoTrailLogsRole9F4A9B8A"}]}}}}}}},"Resource":{"id":"Resource","path":"Immivo-Prod/ImmivoTrail/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudtrail.CfnTrail","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudTrail::Trail","aws:cdk:cloudformation:props":{"cloudWatchLogsLogGroupArn":{"Fn::GetAtt":["TrailLogGroup7A1F916A","Arn"]},"cloudWatchLogsRoleArn":{"Fn::GetAtt":["ImmivoTrailLogsRole9F4A9B8A","Arn"]},"enableLogFileValidation":true,"eventSelectors":[],"includeGlobalServiceEvents":true,"isLogging":true,"isMultiRegionTrail":false,"s3BucketName":{"Ref":"CloudTrailBucket98B0BFE1"},"tags":[{"key":"Project","value":"Immivo"},{"key":"Stage","value":"prod"}],"trailName":"Immivo-Trail-prod"}}}}},"VpcId":{"id":"VpcId","path":"Immivo-Prod/VpcId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"DBEndpoint":{"id":"DBEndpoint","path":"Immivo-Prod/DBEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"EmailBucketName":{"id":"EmailBucketName","path":"Immivo-Prod/EmailBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"MediaBucketName":{"id":"MediaBucketName","path":"Immivo-Prod/MediaBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"MediaCDNUrl":{"id":"MediaCDNUrl","path":"Immivo-Prod/MediaCDNUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"MediaDistributionId":{"id":"MediaDistributionId","path":"Immivo-Prod/MediaDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"OrchestratorApiUrl":{"id":"OrchestratorApiUrl","path":"Immivo-Prod/OrchestratorApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"FrontendUrl":{"id":"FrontendUrl","path":"Immivo-Prod/FrontendUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"UserPoolId":{"id":"UserPoolId","path":"Immivo-Prod/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"Immivo-Prod/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"AdminUserPoolId":{"id":"AdminUserPoolId","path":"Immivo-Prod/AdminUserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"AdminUserPoolClientId":{"id":"AdminUserPoolClientId","path":"Immivo-Prod/AdminUserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"WafAclArn":{"id":"WafAclArn","path":"Immivo-Prod/WafAclArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"Immivo-Prod/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"Immivo-Prod/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"Immivo-Prod/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.236.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"Immivo-Prod/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.236.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}